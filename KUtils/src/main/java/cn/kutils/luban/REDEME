Luban

ğŸ“– English Documentation
Lubanï¼ˆé²ç­ï¼‰ â€”â€” Androidå›¾ç‰‡å‹ç¼©å·¥å…·ï¼Œä»¿å¾®ä¿¡æœ‹å‹åœˆå‹ç¼©ç­–ç•¥ã€‚

é¡¹ç›®æè¿°

ç›®å‰åšAppå¼€å‘æ€»ç»•ä¸å¼€å›¾ç‰‡è¿™ä¸ªå…ƒç´ ã€‚ä½†æ˜¯éšç€æ‰‹æœºæ‹ç…§åˆ†è¾¨ç‡çš„æå‡ï¼Œå›¾ç‰‡çš„å‹ç¼©æˆä¸ºä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ã€‚å•çº¯å¯¹å›¾ç‰‡è¿›è¡Œè£åˆ‡ï¼Œå‹ç¼©å·²ç»æœ‰å¾ˆå¤šæ–‡ç« ä»‹ç»ã€‚ä½†æ˜¯è£åˆ‡æˆå¤šå°‘ï¼Œå‹ç¼©æˆå¤šå°‘å´å¾ˆéš¾æ§åˆ¶å¥½ï¼Œè£åˆ‡è¿‡å¤´å›¾ç‰‡å¤ªå°ï¼Œè´¨é‡å‹ç¼©è¿‡å¤´åˆ™æ˜¾ç¤ºæ•ˆæœå¤ªå·®ã€‚

äºæ˜¯è‡ªç„¶æƒ³åˆ°Appå·¨å¤´â€œå¾®ä¿¡â€ä¼šæ˜¯æ€ä¹ˆå¤„ç†ï¼ŒLubanï¼ˆé²ç­ï¼‰å°±æ˜¯é€šè¿‡åœ¨å¾®ä¿¡æœ‹å‹åœˆå‘é€è¿‘100å¼ ä¸åŒåˆ†è¾¨ç‡å›¾ç‰‡ï¼Œå¯¹æ¯”åŸå›¾ä¸å¾®ä¿¡å‹ç¼©åçš„å›¾ç‰‡é€†å‘æ¨ç®—å‡ºæ¥çš„å‹ç¼©ç®—æ³•ã€‚

å› ä¸ºæœ‰å…¶ä»–è¯­è¨€ä¹Ÿæƒ³è¦å®ç°Lubanï¼Œæ‰€ä»¥æè¿°äº†ä¸€éç®—æ³•æ­¥éª¤ã€‚

å› ä¸ºæ˜¯é€†å‘æ¨ç®—ï¼Œæ•ˆæœè¿˜æ²¡æ³•è·Ÿå¾®ä¿¡ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯å·²ç»å¾ˆæ¥è¿‘å¾®ä¿¡æœ‹å‹åœˆå‹ç¼©åçš„æ•ˆæœï¼Œå…·ä½“çœ‹ä»¥ä¸‹å¯¹æ¯”ï¼

æ•ˆæœä¸å¯¹æ¯”

å†…å®¹	åŸå›¾	Luban	Wechat
æˆªå± 720P	720*1280,390k	720*1280,87k	720*1280,56k
æˆªå± 1080P	1080*1920,2.21M	1080*1920,104k	1080*1920,112k
æ‹ç…§ 13M(4:3)	3096*4128,3.12M	1548*2064,141k	1548*2064,147k
æ‹ç…§ 9.6M(16:9)	4128*2322,4.64M	1032*581,97k	1032*581,74k
æ»šåŠ¨æˆªå±	1080*6433,1.56M	1080*6433,351k	1080*6433,482k
å¯¼å…¥

compile 'io.reactivex:rxandroid:1.2.1'
compile 'io.reactivex:rxjava:1.1.6'

compile 'top.zibin:Luban:1.0.9'
Release Notes

v1.0.9, 2016/10/14

ä¿®æ”¹å‹ç¼©åæ–‡ä»¶è‡ªå¸¦åç¼€ï¼Œæ ¹æ®(#77)æä¾›çš„æ€è·¯
ä½¿ç”¨

Listeneræ–¹å¼

Lubanå†…éƒ¨é‡‡ç”¨IOçº¿ç¨‹è¿›è¡Œå›¾ç‰‡å‹ç¼©ï¼Œå¤–éƒ¨è°ƒç”¨åªéœ€è®¾ç½®å¥½ç»“æœç›‘å¬å³å¯ï¼š

Luban.get(this)
    .load(File)                     //ä¼ äººè¦å‹ç¼©çš„å›¾ç‰‡
    .putGear(Luban.THIRD_GEAR)      //è®¾å®šå‹ç¼©æ¡£æ¬¡ï¼Œé»˜è®¤ä¸‰æŒ¡
    .setCompressListener(new OnCompressListener() { //è®¾ç½®å›è°ƒ

        @Override
        public void onStart() {
            // TODO å‹ç¼©å¼€å§‹å‰è°ƒç”¨ï¼Œå¯ä»¥åœ¨æ–¹æ³•å†…å¯åŠ¨ loading UI
        }
        @Override
        public void onSuccess(File file) {
            // TODO å‹ç¼©æˆåŠŸåè°ƒç”¨ï¼Œè¿”å›å‹ç¼©åçš„å›¾ç‰‡æ–‡ä»¶
        }

        @Override
        public void onError(Throwable e) {
            // TODO å½“å‹ç¼©è¿‡å»å‡ºç°é—®é¢˜æ—¶è°ƒç”¨
        }
    }).launch();    //å¯åŠ¨å‹ç¼©
RxJavaæ–¹å¼

RxJavaè°ƒç”¨æ–¹å¼è¯·è‡ªè¡Œéšæ„æ§åˆ¶çº¿ç¨‹ï¼š

Luban.get(this)
        .load(file)
        .putGear(Luban.THIRD_GEAR)
        .asObservable()
        .subscribeOn(Schedulers.io())
        .observeOn(AndroidSchedulers.mainThread())
        .doOnError(new Action1<Throwable>() {
            @Override
            public void call(Throwable throwable) {
                throwable.printStackTrace();
            }
        })
        .onErrorResumeNext(new Func1<Throwable, Observable<? extends File>>() {
            @Override
            public Observable<? extends File> call(Throwable throwable) {
                return Observable.empty();
            }
        })
        .subscribe(new Action1<File>() {
            @Override
            public void call(File file) {
                // TODO å‹ç¼©æˆåŠŸåè°ƒç”¨ï¼Œè¿”å›å‹ç¼©åçš„å›¾ç‰‡æ–‡ä»¶
            }
        }).launch();    //å¯åŠ¨å‹ç¼©
æ–¹æ³•å¯¹åº”è¡¨

æ–¹æ³•å	åŠŸèƒ½
load(File file)	ä¼ å…¥è¦å‹ç¼©çš„æ–‡ä»¶
setFilename(String filename)	è®¾ç½®å‹ç¼©åå›¾ç‰‡å‘½å
putGear(int gear)	è®¾ç½®å‹ç¼©æ¡£æ¬¡
